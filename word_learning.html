<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ» å°è‹±ç†Šå­¸å ‚ ğŸ»</title>
    <link rel="stylesheet" href="style copy.css">
</head>
<body>
    <!-- ç©å®¶è³‡è¨Šæ¬„ -->
    <div class="info-bar">
        <h2>ğŸ†ç©å®¶è³‡è¨ŠğŸ†</h2>
        <h2>Player Information</h2>
        <p id="player-level">ç­‰ç´šï¼šåˆç™»å ´çš„æ–°æ‰‹é¨å£«</p>
        <p id="motivation"></p>
        <p id="stars">ğŸ’° é‡‘å¹£æ•¸é‡ï¼š0</p>
       <p id="tools">ğŸ’ æ“æœ‰å…ƒä»¶ï¼šç„¡</p>
     
    <!-- æ€ªç‰©å€å¡Š -->
    <div class="monster-area">
        <h3>ğŸ‘¾ æ€ªç‰©ä¾†è¥²ï¼</h3>
        <div id="monster-display">
            <span id="monster-emoji">ğŸ‰</span>
            <progress id="monster-hp-bar" value="100" max="100"></progress>
        </div>
        <h4>é¸æ“‡æ­¦å™¨æ”»æ“Šï¼š</h4>
        <div id="weapon-buttons"></div>
        <button class="button attack-button" onclick="attackMonster()">æ”»æ“Š</button>
    </div>
    </div>
    
    
    <!-- ä¸»å…§å®¹å€åŸŸ -->
    <div class="main-content">
        <h1>ğŸ» å°è‹±ç†Šå­¸å ‚ ğŸ»</h1>
        <p id="greeting"></p>
        <p></p>

        <!-- æ¨¡å¼åˆ‡æ›æŒ‰éˆ• -->
        <div class="mode-toggle">
            <button class="button" onclick="switchMode('study')">å–®å­—æ–°æ˜Ÿç·´æ­¦å ´</button>
            <button class="button" onclick="switchMode('game')">æŒ‘æˆ°å­—æ¯æ£®æ—</button>
        </div>

        <!-- å–®å­—å­¸ç¿’æ¨¡å¼ -->
        <div id="study-area" class="section visible">
            <div class="study-area">
                <div class="study-emoji" id="study-emoji">ğŸ</div>
                <div class="study-word" id="study-word">
                    Apple 
                    <a id="audio-link" href="#" onclick="playAudio()">ğŸ”Š</a>
                </div>
                <p id="study-chinese">ä¸­æ–‡ï¼šè˜‹æœ</p>
                <p id="study-pos">è©æ€§ï¼šåè©</p>
                <p id="study-pronunciation">ç™¼éŸ³ï¼š/ËˆÃ¦p.lÌ©/</p>
                <p id="study-example">ä¾‹å¥ï¼šI eat an apple every day.</p>
                <button class="button" onclick="nextWord()">ä¸‹ä¸€å€‹å–®å­—ğŸ†</button>
                <button class="button" onclick="previousWord()">ä¸Šä¸€å€‹å–®å­—ğŸ” </button>

            </div>
        </div>

        <!-- æ‹¼å­—æŒ‘æˆ°æ¨¡å¼ -->
        <div id="game-area" class="section">
            <div class="challenge-area">
                <div class="challenge-emoji" id="emoji">ğŸ</div>
                <div class="challenge-word" id="challenge-chinese">ä¸­æ–‡ï¼šè˜‹æœ</div>
                <div class="letters" id="letters"></div>
                <div class="chosen-letters" id="chosen-letters"></div>
                <button class="button" onclick="removeLastLetter()">âŒ æ’¤å›é¸æ“‡</button>
                <button class="button" id="submit" onclick="submitAnswer()">ğŸŒŸ ç¢ºèªç­”æ¡ˆ</button>
                <div id="result"></div>
                <button class="button" id="restart" onclick="restartGame()">ä¸‹ä¸€é¡Œ</button>
            </div>
        </div>

        <!-- å…ƒä»¶å•†åº— -->
        <div class="shop-area">
            <h2>å…ƒä»¶å•†åº—</h2>
            <p>æ”»æ“Šæ­¦å™¨</p>
            <button class="button shop-button" onclick="redeemItem('ğŸ—¡ï¸ åŒ•é¦–', 1)">ğŸ—¡ï¸ åŒ•é¦– (1ğŸ’°)</button>
            <button class="button shop-button" onclick="redeemItem('ğŸª“æ–§é ­', 1)">ğŸª“æ–§é ­ (1ğŸ’°)</button>
            <button class="button shop-button" onclick="redeemItem('ğŸ”ª åˆ€', 2)">ğŸ”ª åˆ€ (2ğŸ’°)</button>
            <button class="button shop-button" onclick="redeemItem('âš”ï¸ äº¤å‰åŠ', 4)">âš”ï¸ äº¤å‰åŠ(4ğŸ’°)</button>
            <button class="button shop-button" onclick="redeemItem('ğŸ¹å¼“ç®­', 4)">ğŸ¹å¼“ç®­ (4ğŸ’°)</button>
            <button class="button shop-button" onclick="redeemItem('ğŸª„ é­”æ–', 5)">ğŸª„ é­”æ– (5ğŸ’°)</button>
            <p>é˜²ç¦¦è£å‚™</p>
            <button class="button shop-button" onclick="redeemItem('ğŸ›¡ï¸ ç›¾ç‰Œ', 2)">ğŸ›¡ï¸ ç›¾ç‰Œ (2ğŸ’°)</button>
            <button class="button shop-button" onclick="redeemItem('ğŸª– è»ç”¨é ­ç›”', 3)">ğŸª– è»ç”¨é ­ç›” (3ğŸ’°)</button>    
    </div>

    <script>
        let playerStars = 0;
        let playerTools = [];
        let words = [];
        let currentStudyIndex = 0;
        let currentWordIndex = 0;
        let selectedLetters = [];

        async function loadWords() {
            try {
                const response = await fetch("words.json");
                const data = await response.json();
                words = data.words;
                showWordStudy(currentStudyIndex);
            } catch (error) {
                console.error("ç„¡æ³•åŠ è¼‰é¡Œç›®ï¼š", error);
            }
        }

        function switchMode(mode) {
            document.getElementById("study-area").classList.remove("visible");
            document.getElementById("game-area").classList.remove("visible");
            if (mode === "study") {
                document.getElementById("study-area").classList.add("visible");
                showWordStudy(currentStudyIndex);
            } else if (mode === "game") {
                document.getElementById("game-area").classList.add("visible");
                startGame();
            }
        }

        function showWordStudy(index) {
            const word = words[index];
            document.getElementById("study-emoji").textContent = word.emoji;
            document.getElementById("study-word").innerHTML = `
                ${word.word} 
                <a id="audio-link" href="#" onclick="playAudio('${word.Audio_File}')">ğŸ”Š</a>
            `;
            document.getElementById("study-chinese").textContent = `ãŠ¥${word.meaning}`;
            document.getElementById("study-pos").textContent = `è©æ€§ï¼š${word.part_of_speech}`;
            document.getElementById("study-pronunciation").textContent = `ç™¼éŸ³ï¼š${word.pronunciation}`;
            document.getElementById("study-example").textContent = `ä¾‹å¥ï¼š${word.example}`;
        }

        function playAudio(audioFile) {
            const audio = new Audio(audioFile);
            audio.play();
        }

        function nextWord() {
            currentStudyIndex = (currentStudyIndex + 1) % words.length;
            showWordStudy(currentStudyIndex);
        }

        function previousWord() {
        // å¦‚æœæ˜¯ç¬¬ä¸€å€‹å–®å­—ï¼Œå¾ªç’°åˆ°æœ€å¾Œä¸€å€‹
            currentStudyIndex = (currentStudyIndex - 1 + words.length) % words.length;
            showWordStudy(currentStudyIndex);
        }


        function startGame() {
            const word = words[currentWordIndex];
            document.getElementById("emoji").textContent = word.emoji;
            document.getElementById("challenge-chinese").textContent = `ãŠ¥${word.meaning}`;
            document.getElementById("result").textContent = "";
            selectedLetters = [];
            document.getElementById("chosen-letters").innerHTML = "";
            const shuffled = shuffle(word.word.split(""));
            document.getElementById("letters").innerHTML = shuffled
                .map((letter, index) => `<div class="letter" id="letter-${index}" onclick="selectLetter('${letter}', 'letter-${index}')">${letter}</div>`)
                .join("");
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function selectLetter(letter, elementId) {
            selectedLetters.push({ letter, elementId });
            const element = document.getElementById(elementId);
            element.style.pointerEvents = "none";
            element.style.backgroundColor = "#4caf50";
            document.getElementById("chosen-letters").innerHTML = selectedLetters
                .map(({ letter }) => `<span class="chosen-letter">${letter}</span>`)
                .join("");
        }

        function removeLastLetter() {
            if (selectedLetters.length > 0) {
                const last = selectedLetters.pop();
                const element = document.getElementById(last.elementId);
                element.style.pointerEvents = "auto";
                element.style.backgroundColor = "#64b5f6";
                document.getElementById("chosen-letters").innerHTML = selectedLetters
                    .map(({ letter }) => `<span class="chosen-letter">${letter}</span>`)
                    .join("");
            }
        }

        function submitAnswer() {
            const word = words[currentWordIndex];
            const playerAnswer = selectedLetters.map(({ letter }) => letter).join("");
            <!-- ç²å¾—æ˜Ÿæ˜Ÿçš„ç¨‹å¼ç¢¼ -->
            if (playerAnswer === word.word) {
                document.getElementById("result").innerHTML = "ğŸ‰ WOWï¼ç­”å°äº†ï¼ğŸŒŸ";
                playerStars++;
            } else {
                document.getElementById("result").innerHTML = "ğŸŒŸ ä¸è¦æ”¾æ£„ï¼Œå†è©¦ä¸€æ¬¡å§ï¼ğŸ«¶";
            }

            updatePlayerInfo();
        }

        function restartGame() {
            currentWordIndex = (currentWordIndex + 1) % words.length;
            startGame();
        }

        function updatePlayerInfo() {
            document.getElementById("stars").textContent = `ğŸ’° é‡‘å¹£æ•¸é‡ï¼š${playerStars}`;
            document.getElementById("tools").innerHTML = `ğŸ’ æ“æœ‰å…ƒä»¶ï¼š${
            playerTools.length > 0
            ? playerTools.map(tool => `<span class="tool-item">${tool}</span>`).join("")
            : "ç„¡"
            }`;
            const levels = ["æ–°æ‰‹å†’éšªå®¶", "è³‡æ·±æˆ°å£«", "ç²¾è‹±è‹±é›„", "ç„¡æ•µå‹‡è€…"];
            const levelIndex = Math.min(Math.floor(playerTools.length / 2), levels.length - 1);
            document.getElementById("player-level").textContent = `ç­‰ç´šï¼š${levels[levelIndex]}`;
        }


        loadWords();
        generateGreeting();
        generateMotivation();
        updatePlayerInfo();
    
        function generateGreeting() {
            const now = new Date();
            const hour = now.getHours();
            let greeting = '';
            if (hour < 12) {
                greeting = 'ğŸŒ æ—©å®‰ï¼Œå°å‹‡å£«ï¼ä»Šå¤©æº–å‚™å¥½è¿æ¥æŒ‘æˆ°äº†å—ï¼Ÿ';
            } else if (hour < 18) {
                greeting = 'ğŸŒŸ åˆå®‰ï¼æŒçºŒåŠªåŠ›ï¼Œå°é¨å£«å€‘ï¼é€²æ­¥å°±åœ¨å‰æ–¹ï¼';
            } else {
                greeting = 'ğŸŒœ æ™šå®‰ï¼å°è‹±ç†Šå­¸å ‚é™ªä½ å­¸ç¿’åˆ°æœ€å¾Œä¸€åˆ»ï¼';
            }
            document.getElementById('greeting').textContent = greeting;
        }

        function generateMotivation() {
            const motivations = [
                'ğŸ’ª "å°é¨å£«å€‘ï¼ŒåŠ æ²¹ï¼æ¯ä¸€æ¬¡åŠªåŠ›éƒ½è®“ä½ æ›´æ¥è¿‘æˆåŠŸï¼"',
                'ğŸŒŸ "å®Œæˆä»Šå¤©çš„å°æŒ‘æˆ°ï¼Œè‹±èªæ˜Ÿæ˜Ÿç­‰è‘—ä½ ä¾†è§£é–å“¦ï¼"',
                'ğŸ›¡ï¸ "å­¸è‹±èªçš„å°å‹‡å£«ï¼Œæ‹¿èµ·æ™ºæ…§ä¹‹ç›¾ï¼Œè¿æ¥æŒ‘æˆ°å§ï¼"',
                'ğŸš€ "åªè¦åŠªåŠ›ä¸€æ­¥ä¸€æ­¥ï¼Œè‹±èªçš„å†’éšªä¹‹é–€å°±æœƒæ‰“é–‹ï¼"',
                'ğŸŒˆ "æŒ‘æˆ°è¶Šå¤šï¼Œé€²æ­¥è¶Šå¤§ï¼ä»Šå¤©çš„ä½ æ¯”æ˜¨å¤©æ›´æ£’ï¼"',
                'ğŸ¾ "æ¯å­¸æœƒä¸€å€‹æ–°å–®å­—ï¼Œå°±æ˜¯ç‚ºè‹±èªä¹‹æ—…å¢åŠ äº†ä¸€å€‹å°å¤¥ä¼´ï¼"',
                'ğŸ‰ "æ­¡è¿ä¾†åˆ°è‹±èªæ´¾å°ï¼æº–å‚™å¥½ä¸€èµ·ç©å­¸è‹±èªäº†å—ï¼Ÿ"',
                'ğŸ "å­¸ä¸€é»è‹±èªï¼Œæ”¶ç©«æ»¿æ»¿æœå¯¦ï¼ä»Šå¤©çš„æˆæœæ˜¯ä»€éº¼å‘¢ï¼Ÿ"',
                'ğŸ“š "å°è‹±ç†Šèªªï¼šå¤šå­¸ä¸€å€‹å¥å‹ï¼Œå†’éšªåœ°åœ–å°±å¤šä¸€å¡Šï¼åŠ æ²¹å§ï¼"',
                'ğŸ» "è‹±èªå­¸å ‚è£¡ï¼Œæœ€åŠªåŠ›çš„å°ç†Šä¸€å®šæœƒç²å¾—å¤§å¤§çš„æˆé•·ï¼"',
                'âœ¨ "æ¯å¤©å­¸ä¸€é»ï¼Œé€²æ­¥å¤šä¸€é»ï¼ä½ æ˜¯æœ€æ£’çš„è‹±èªå°é”äººï¼"',
                'ğŸ† "ä»Šå¤©å­¸æœƒçš„çŸ¥è­˜ï¼Œå°±æ˜¯æ˜å¤©æˆåŠŸçš„ç§˜è¨£ï¼"',
                'ğŸŒŸ "åªè¦ä¸æ€•æŒ‘æˆ°ï¼Œå°é¨å£«ç¸½èƒ½ç™»ä¸Šè‹±èªçš„é«˜å³°ï¼"',
                'ğŸŒ "ä½ çš„åŠªåŠ›æ˜¯é™½å…‰ï¼Œè‹±èªä¸–ç•Œå› ä½ è€Œæ˜äº®ï¼"',
                'ğŸ¯ "å‹‡æ•¢æŒ‘æˆ°å§ï¼Œæ¯ä¸€æ¬¡éŒ¯èª¤éƒ½æœƒå¸¶ä¾†æ–°çš„é€²æ­¥ï¼"',
                'ğŸŒŒ "å­¸è‹±èªåƒæ˜Ÿç©ºæ¢éšªï¼ŒåŠªåŠ›æ‰èƒ½æ‰¾åˆ°æœ€äº®çš„æ˜Ÿæ˜Ÿï¼"',
                'ğŸ”‘ "æŒæ¡è‹±èªå°±æ˜¯æŒæ¡ä¸–ç•Œçš„é‘°åŒ™ï¼Œè®“æˆ‘å€‘ä¸€èµ·åŠªåŠ›å§ï¼"',
                'ğŸ° "æŒ‘æˆ°è‹±èªä»»å‹™ï¼Œè´å¾—å±¬æ–¼ä½ çš„æ™ºæ…§å¯¶è—ï¼"',
                'ğŸš¤ "é§•é§›çŸ¥è­˜çš„å°èˆ¹ï¼Œå‹‡æ•¢æ¢ç´¢è‹±èªçš„ç„¡é‚Šå¤§æµ·ï¼"',
                'ğŸŒº "è®“æˆ‘å€‘ä¸€èµ·åœ¨è‹±èªèŠ±åœ’è£¡ï¼Œç¨®ä¸‹çŸ¥è­˜çš„ç¨®å­å§ï¼"'
            ];
            const randomMotivation = motivations[Math.floor(Math.random() * motivations.length)];
            document.getElementById('motivation').textContent = randomMotivation;
        }
        // æ›´æ–°å…ƒä»¶é¡¯ç¤ºé‚è¼¯
        function updateToolDisplay() {
            const toolContainer = document.getElementById("tools");
            const weaponButtonsContainer = document.getElementById("weapon-buttons");

         // æ›´æ–°å…ƒä»¶æ–‡å­—åˆ—è¡¨ //
        toolContainer.innerHTML = `ğŸ’ æ“æœ‰å…ƒä»¶ï¼š${
         playerTools.length > 0
        ? playerTools.map((tool) => `<span class="tool-item">${tool}</span>`).join("")
         : "ç„¡"
        }`; 


        // å‹•æ…‹ç”Ÿæˆæ­¦å™¨æŒ‰éˆ•
        weaponButtonsContainer.innerHTML = playerTools
        .map(
            (tool, index) =>
                `<button class="button weapon-button" onclick="attackMonster('${tool}', ${index})">${tool}</button>`
        )
        .join("");
        }



// æ€ªç‰©ç›¸é—œæ•¸æ“š
// let monsterHP = 100;

// æ€ªç‰©ç‰©ä»¶
let monster = {
    level: 1,
    hp: 100,
    maxHp: 100,
    emoji: "ğŸ‰",
    attackPower: 10,
};

// æ€ªç‰©æ”»æ“Šå‡½æ•¸
function attackMonster(tool, index) {
    if (!tool) {
        alert("è«‹é¸æ“‡æ­¦å™¨é€²è¡Œæ”»æ“Šï¼");
        return;
    }

    const damage = calculateDamage(tool); // è¨ˆç®—æ­¦å™¨å‚·å®³
    monster.hp -= damage; // æ¸›å°‘æ€ªç‰©è¡€é‡

    if (monster.hp <= 0) {
        alert(`ğŸ‰ ä½ ä½¿ç”¨ ${tool} æ‰“æ•—äº†æ€ªç‰©ï¼`);
        levelUpMonster(); // æ€ªç‰©å‡ç´š
        playerTools.splice(index, 1); // ç§»é™¤ç”¨éçš„æ­¦å™¨
    } else {
        alert(`ä½ ç”¨ ${tool} æ”»æ“Šæ€ªç‰©ï¼Œé€ æˆäº† ${damage} é»å‚·å®³ï¼`);
    }
    
        // ç§»é™¤ä½¿ç”¨éçš„æ­¦å™¨
        playerTools.splice(index, 1);

    // æ›´æ–°é¡¯ç¤º
    updateMonsterDisplay(); // æ›´æ–°æ€ªç‰©é¡¯ç¤º
    updateToolDisplay(); // æ›´æ–°æ­¦å™¨æŒ‰éˆ•é¡¯ç¤º
}

// æ›´æ–°æ€ªç‰©é¡¯ç¤º
function updateMonsterDisplay() {
    document.getElementById("monster-emoji").textContent = monster.emoji;
    document.getElementById("monster-hp-bar").value = monster.hp;
    document.getElementById("monster-hp-bar").max = monster.maxHp;
    document.getElementById("monster-hp-bar").textContent = `HP: ${monster.hp}/${monster.maxHp}`;
}

// æ€ªç‰©å‡ç´šé‚è¼¯
function levelUpMonster() {
    monster.level++;
    monster.maxHp += 50; // å¢åŠ æœ€å¤§è¡€é‡
    monster.hp = monster.maxHp; // æ¢å¾©è¡€é‡
    monster.attackPower += 5; // æå‡æ”»æ“ŠåŠ›

    // æ›´æ–°æ€ªç‰©å¤–è§€
    if (monster.level === 2) {
        monster.emoji = "ğŸ¦–";
    } else if (monster.level === 3) {
        monster.emoji = "ğŸ²";
    } else if (monster.level >= 4) {
        monster.emoji = "ğŸ‘¹";
    }

    alert(`ğŸ‰ æ€ªç‰©å‡ç´šç‚ºç­‰ç´š ${monster.level}ï¼Œè®Šå¾—æ›´å¼·äº†ï¼`);
}

// è¨ˆç®—æ­¦å™¨å‚·å®³
function calculateDamage(tool) {
    const toolDamage = {
        "ğŸ—¡ï¸ åŒ•é¦–": 10,
        "ğŸª“æ–§é ­": 15,
        "ğŸ”ª åˆ€": 20,
        "âš”ï¸ äº¤å‰åŠ": 30,
        "ğŸ¹å¼“ç®­": 25,
        "ğŸª„ é­”æ–": 35,
    };
    return toolDamage[tool] || 5; // é è¨­å‚·å®³ç‚º 5
}

// æ›´æ–°æ­¦å™¨æŒ‰éˆ•é¡¯ç¤º
function updateToolDisplay() {
    const weaponButtonsContainer = document.getElementById("weapon-buttons");
    weaponButtonsContainer.innerHTML = ""; // æ¸…ç©ºèˆŠæŒ‰éˆ•

    playerTools.forEach((tool, index) => {
        const button = document.createElement("button");
        button.className = "button weapon-button";
        button.textContent = tool;
        button.onclick = () => attackMonster(tool, index); // ç¶å®šæ”»æ“Šäº‹ä»¶
        weaponButtonsContainer.appendChild(button);
    });
}


// ç©å®¶å…Œæ›æ­¦å™¨
function redeemItem(item, cost) {
    if (playerStars >= cost) {
        playerStars -= cost;
        playerTools.push(item);
        updatePlayerInfo();
        updateToolDisplay();
        alert(`æ­å–œï¼ä½ ç²å¾—äº†é“å…·ï¼š${item}ï¼`);
    } else {
        alert("é‡‘å¹£æ•¸é‡ä¸è¶³ï¼Œç„¡æ³•å…Œæ›ï¼");
    }
}

// åˆå§‹åŒ–
function initializeGame() {
    updateMonsterDisplay();
    updateToolDisplay();
}

initializeGame();


    </script>
</body>
</html>
